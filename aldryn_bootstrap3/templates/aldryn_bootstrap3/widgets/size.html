<div class="btn-group btn-group-sizes js-btn-group-sizes" data-toggle="buttons">
{% for item in selects %}
    {{ item }}
{% endfor %}
</div>

{# Styling definitions #}
<style>
    .btn-group-sizes label { padding: 5px 10px; width: auto; }
    .btn-group-sizes .btn-default { min-height: 36px; }
    .btn-group-sizes .text-xs { font-size: 10px; padding-top: 9px; }
    .btn-group-sizes .text-sm { font-size: 12px; padding-top: 8px; }
    .btn-group-sizes .text- { font-size: 14px; padding-top: 6px;}
    .btn-group-sizes .text-lg { font-size: 16px; padding-top: 5px; }

    .btn-group-sizes .glyphicon { margin-right: 5px; }
    .btn-group-sizes .text-xs .glyphicon { font-size: 9px; }
    .btn-group-sizes .text-sm .glyphicon { font-size: 10px; }
    .btn-group-sizes .text-md .glyphicon { font-size: 12px;  margin-top: 2px; }
    .btn-group-sizes .text-lg .glyphicon { font-size: 14px; margin-top: 3px; }
</style>

{# Javascript #}
<script>
    if (!$) {
        $ = django.jQuery;
    }

    $( document ).ready(function() {
        var sizesInputs = $('.js-btn-group-sizes label input');
        var selectedSizesInput;

        sizesInputs.each(function( index, item ) {
            var label = $(item).parent();
            var input = $(item);

            // Initial active state
            if (input.prop('checked')) {
                selectedSizesInput = input;
                label.addClass('active');
            }

            // Set sizes
            label.addClass('btn btn-default text-' + item.value);

            // Add icon
            $( "<span class='glyphicon glyphicon-record'></span>" ).insertAfter( input );

            // Set active states
            label.on('click', function(e) {
                var input = $(this).find('input');

                selectedSizesInput.attr('checked', false);
                input.attr('checked', true);

                selectedSizesInput = input;
            });

        });

    })
</script>

{# selected: {{ selects.value }} #}

{# ############# MOVE TO WIDGETS/icons.html ################# #}
{# Icon settings #}
<div class="icon js-icon form-inline">
    <select class="form-control js-iconset">
        <option value="glyphicons">Glyphicons</option>
        <option value="fontawesome">Fontawesome</option>
    </select>
    <span class="iconpicker js-icon-picker">
        <button class="btn btn-default form-control"></button>
    </span>
    <span class="btn-icon-positions js-btn-icon-positions btn-group">
        <button class="btn btn-default form-control" value="left" type="button"><span class="glyphicon glyphicon-arrow-left"></span> Left</button>
        <button class="btn btn-default form-control" value="right" type="button">Right <span class="glyphicon glyphicon-arrow-right"></span></button>
        <button class="btn btn-default form-control" value="remove" type="button"><span class="glyphicon glyphicon-remove"></span> Remove</button>
    </span>
</div>

{# Styling definitions #}

<!-- overriding django cms admin style -->
<style>
    {# TODO: Find a way to move this into a scss file #}
   .icon select { width: auto; }
   .iconpicker button.btn-default, .iconpicker-popover button.btn-default, .btn-icon-positions button.btn-default {
       background-image: none !important;
       box-shadow: none !important;
       border: 1px solid #ccc !important;
   }
   .iconpicker button.btn-default:hover, .iconpicker-popover button.btn-default:hover, .btn-icon-positions button.btn-default:hover {
       color: #333 !important;
       background-color: #e6e6e6 !important;
       border-color: #adadad !important;
   }
   .iconpicker-popover table {
       margin: 0 !important;
       padding: 0 !important;
   }
   .iconpicker-popover table tr td, .iconpicker-popover table tr th {
       border-bottom: none;
       padding: 0;
   }
   .iconpicker-popover table tfoot tr td {
       padding-top: 5px;
       border-top: 0;
       background: none;
   }
   .btn-icon-positions button.btn.active {
       background: #e6e6e6 !important;
       box-shadow: inset 0 3px 5px rgba(0,0,0,.125) !important;
   }

</style>

{# Javascript #}
<script>
    if (!$) {
        $ = django.jQuery;
    }
    $( document ).ready(function() {
        window.iconPicker = $('.js-icon-picker');
        window.iconSet = $('.js-iconset');
        window.iconPositionBtns = $( '.js-btn-icon-positions .btn' );
        window.iconPosition = 'left';

        $('.js-icon-picker button').iconpicker({
            arrowClass: 'btn-default'
        });
        iconSet.on('change', function(){
            var fontset = $(this).val();
            $('.js-icon-picker button').iconpicker('setIconset', fontset);
            iconSelected = iconPicker.find('i').attr('class');
            console.log(iconSelected);
        });

        iconPicker.on('change', function(e) {
            iconSelected = $(this).find('i').attr('class');
            console.log(iconSelected);
        });

        iconPositionBtns.on('click', function() {
            iconPosition = $(this).val();
            console.log(iconPosition);
        });

        // Init active icon
        window.iconSelected = iconPicker.find('i').attr('class');

    });
</script>

{# ############# END MOVE TO WIDGETS/icons.html ################# #}

{# ############# MOVE TO PLUGINS/BUTTON_ADMIN_PREVIEW.html ################# #}
<div class="well btn-preview js-btn-preview text-center">
    <a class="btn" role="button">Example Button</a>
</div>

{# Styling definitions #}
<style>
   .btn-preview.well { margin-left: 96px; overflow: scroll; }
</style>

{# Javascript #}
<script>
    if (!$) {
        $ = django.jQuery;
    }
    $( document ).ready(function() {
        var contextTriggers = $('.js-btn-group-context .btn');
        var sizesTriggers = $('.js-btn-group-sizes .btn');

        var previewButton = $('.js-btn-preview .btn');
        var previewButtonText = previewButton.text();


        // Init defaults
        var currentContextTriggerValue;
        var currentSizesTriggerValue;

        contextTriggers.each(function( index, item ) {
            if ($(item).find('input').attr('checked') == 'checked') {
                var context = $(item).find('input[checked="checked"]').val();
                $('.js-btn-preview .btn').addClass('btn-' + context);
                currentContextTriggerValue = context;
            }
        });

        sizesTriggers.each(function( index, item ) {
            if ($(item).find('input').attr('checked') == 'checked') {
                var size = $(item).find('input[checked="checked"]').val();
                $('.js-btn-preview .btn').addClass('btn-' + size);
                currentSizesTriggerValue = size;
            }
        });

        // Set context of elements for preview
        contextTriggers.on('click', function(e) {
            var context = $(this).find('input').val();

            previewButton.removeClass('btn-'+ currentContextTriggerValue);
            previewButton.addClass('btn-'+ context);

            currentContextTriggerValue = context;
        });


        // Set sizes of elements for preview
        sizesTriggers.on('click', function(e) {
            var size = $(this).find('input').val();

            previewButton.removeClass('btn-'+ currentSizesTriggerValue);
            previewButton.addClass('btn-'+ size);

            currentSizesTriggerValue = size;
        });

        // Update text in button for preview
        previewButton.text($( "#id_label" ).val());

        $( "#id_label" ).on('input', function() {
            if ($(this).val()) {
                $('.js-btn-preview .btn').text($(this).val());
            } else {
                $('.js-btn-preview .btn').text(previewButtonText);
            }
        });

        // Set Icon of button

        iconPositionBtns.on('click', function() {
            iconPositionBtns.removeClass('active');
            $(this).addClass('active');

            $('.js-icon-position').remove()

            if (iconPosition == 'right') {
                previewButton.append(' <i class="js-icon-position ' + iconSelected + '"></i>');
            }
            if (iconPosition == 'left') {
                previewButton.prepend('<i class="js-icon-position ' + iconSelected + '"></i> ');
            }

        });

        iconPicker.on('change', function(e) {
            $('.js-icon-position').remove();
            
            if (iconPosition == 'right') {
                previewButton.append(' <i class="js-icon-position ' + iconSelected + '"></i>');
            }
            if (iconPosition == 'left') {
                previewButton.prepend('<i class="js-icon-position ' + iconSelected + '"></i> ');
            }
        });

        iconSet.on('change', function(e) {
            $('.js-icon-position').remove();
            iconPositionBtns.removeClass('active');
        });

    });
</script>

{# ############# END MOVE TO PLUGINS/BUTTON_ADMIN_PREVIEW.html ################# #}

